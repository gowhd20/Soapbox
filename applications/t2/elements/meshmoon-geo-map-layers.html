<polymer-element name="meshmoon-geo-map-layers" attributes="layers config"><template><style type="text/css">:host{pointer-events:none;max-width:466px}#container{pointer-events:auto;background-color:rgba(255,255,255,1);padding:8px;padding-left:20px;padding-right:10px}#layersContainer>.list-item{height:40px}.list-title{height:35px;text-transform:uppercase;font-weight:600}paper-slider{width:135px}paper-slider.gtk::shadow #sliderBar::shadow #activeProgress{background-color:rgba(70,130,180,.8)}paper-slider::shadow #sliderKnobInner{background-color:#4682b4}paper-slider::shadow #sliderKnobInner::before{background-color:#4682b4}.button{padding:5px 3px}.button-red{color:#a55757}core-tooltip[large]::shadow .core-tooltip{font-size:15px;padding:12px;left:0;margin-left:calc(100% + 5px);pointer-events:none}core-tooltip::shadow .core-tooltip{opacity:0!important;-webkit-transition:all 0ms ease 0ms;transition:all 0ms ease 0ms;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}core-tooltip:focus::shadow .core-tooltip,core-tooltip:hover::shadow .core-tooltip{opacity:1!important;-webkit-transition:all 400ms ease 300ms;transition:all 400ms ease 300ms;-webkit-transform:translate3d(5px,0,0);transform:translate3d(5px,0,0)}core-tooltip:focus{visibility:hidden!important}.dummy-buttons{width:68px}</style><paper-shadow z="1" animated id="container"><div layout vertical id="layersContainer"><div layout horizontal center class="list-item list-line" id="vegetationLayout" hidden?="{{ !config.visibility.vegetation }}"><core-tooltip label="" large noarrow position="right"><core-item class="list-item" style="min-width:100px">Vegetation</core-item></core-tooltip><div flex></div><paper-slider min="0" max="100" value="50" pin class="gtk" on-immediate-value-change="{{ onVegetationOpacityChanged }}"></paper-slider><core-tooltip label="Hide" large noarrow position="right"><core-icon-button icon="remove-circle-outline" class="button button-red" on-click="{{ onHideVegetation }}"></core-icon-button></core-tooltip></div><div layout horizontal center class="list-item list-line" id="terrainLayout" hidden?="{{ !config.visibility.terrain }}"><core-tooltip label="" large noarrow position="right"><core-item class="list-item" style="min-width:100px">Terrain</core-item></core-tooltip><div flex></div><paper-slider min="0" max="1000" value="0" pin class="gtk" on-immediate-value-change="{{ onTerrainHeightChanged }}"></paper-slider><core-tooltip label="Hide" large noarrow position="right"><core-icon-button icon="remove-circle-outline" class="button button-red" on-click="{{ onHideTerrain }}"></core-icon-button></core-tooltip></div><div layout horizontal center class="list-item" hidden?="{{layers.length > 0}}"><core-item style="color:#a5a5a5">No map layers enabled</core-item></div><template repeat="{{ layer in layers }}"><div layout horizontal center class="list-item list-line" layer-id="{{ layer.Id }}"><core-tooltip label="{{ layer.Title }}" large noarrow position="right"><core-item class="list-item" endpoint-id="layer.Endpoint" layer-id="{{ layer.Id }}">{{ layer.Title | shortName }}</core-item></core-tooltip><div flex></div><paper-slider min="0" max="100" value="50" pin class="gtk" layer-id="{{ layer.Id }}" on-immediate-value-change="{{ onOpacityChanged }}"></paper-slider><core-tooltip label="Hide" large noarrow position="right"><core-icon-button icon="remove-circle-outline" class="button button-red" on-click="{{ onHide }}" layer-id="{{ layer.Id }}"></core-icon-button></core-tooltip></div></template><div layout horizontal start start-justified wrap id="legends"><template repeat="{{ layer, index in layers }}"><template if="{{ layer.Style && layer.Style.Legend && layer.Style.Legend.Resource && layer.Style.Legend.Resource.EndPoint }}"><img src="{{ layer.Style.Legend.Resource.EndPoint }}" style="margin-top:5px"></template></template></div></div></paper-shadow></template><script>!function(){"use strict";Polymer({publish:{defaultOpacity:50,vegetationOpacity:50,terrainHeight:0},parent:void 0,created:function(){this.layers=[],this.config={},this.timing=new Tundra.Classes.AsyncHelper("webrocket-toolbar",this)},ready:function(){},shortName:function(e){return"string"==typeof e&&e.length>30?e.substring(0,30)+"...":e},onHide:function(e,t,i){this.parent&&this.parent.disable($(i).attr("layer-id"))},onMoveLayerDown:function(e,t,i){},onMoveLayerUp:function(e,t,i){},onHideVegetation:function(){Tundra.plugins.meshmoonGeo.mapLayers.vegetation=!1},onHideTerrain:function(){Tundra.plugins.meshmoonGeo.mapLayers.terrain=!1},onOpacityChanged:function(e,t,i){this.fire("layer-opacity-change",{id:i.getAttribute("layer-id"),value:i.immediateValue})},onVegetationOpacityChanged:function(e,t,i){this.vegetationOpacity=i.immediateValue,this.fire("vegetation-opacity-change",{value:this.vegetationOpacity})},onTerrainHeightChanged:function(e,t,i){this.terrainHeight=i.immediateValue/150,this.fire("terrain-height-change",{value:this.terrainHeight})}})}();</script></polymer-element>