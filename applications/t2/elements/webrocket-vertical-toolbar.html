<polymer-element name="webrocket-vertical-toolbar" tabindex="-1"><template><style type="text/css">:host{pointer-events:none}paper-shadow#toolbar{pointer-events:auto;background-color:rgba(250,250,250,.8);width:50px;margin:0;padding:0;transition:all 500ms ease;-webkit-transform:translate(0,0);transform:translate(0,0)}paper-shadow#toolbar[focus]{background-color:rgba(250,250,250,1);-webkit-transform:translate(0,0);transform:translate(0,0)}paper-shadow>core-tooltip{top:0;height:40px}paper-shadow>core-tooltip>paper-icon-button,paper-shadow>div#actions>core-tooltip>paper-icon-button{padding:4px}paper-shadow>core-tooltip>paper-icon-button[colored],paper-shadow>div#actions>core-tooltip>paper-icon-button[colored]{color:#4682b4}paper-shadow>core-tooltip>paper-icon-button[colored]::shadow #ripple,paper-shadow>div#actions>core-tooltip>paper-icon-button[colored]::shadow #ripple{color:#444}paper-shadow>core-tooltip>paper-icon-button::shadow #ripple,paper-shadow>div#actions>core-tooltip>paper-icon-button::shadow #ripple{color:#4682b4}paper-shadow>core-tooltip>paper-icon-button::shadow #icon,paper-shadow>div#actions>core-tooltip>paper-icon-button::shadow #icon{height:30px;width:30px}paper-shadow>core-tooltip>paper-icon-button::shadow #icon>div,paper-shadow>div#actions>core-tooltip>paper-icon-button::shadow #icon>div{background-repeat:no-repeat}core-tooltip[large] /deep/ .core-tooltip{font-size:15px}core-tooltip.fancy::shadow .core-tooltip{opacity:0!important;-webkit-transition:all 300ms ease 0ms;transition:all 300ms ease 0ms;-webkit-transform:translate3d(0,10px,0);transform:translate3d(0,10px,0)}core-tooltip.fancy:focus::shadow .core-tooltip,core-tooltip.fancy:hover::shadow .core-tooltip{opacity:1!important;-webkit-transition-delay:0ms;transition-delay:0ms;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}core-tooltip.fancy:focus{visibility:hidden!important}paper-shadow>paper-dropdown>div>paper-item::shadow div.button-content:hover{background-color:#ebebeb;color:#000}paper-shadow>paper-dropdown>div>paper-item::shadow div.button-content{padding:.8em 1em}div#actions{margin-top:5px;margin-bottom:5px}div#actions paper-icon-button::shadow .button-overlay{position:absolute;top:0;left:0;z-index:100;background-color:rgba(250,250,250,.6);border-radius:50%;width:100%;height:100%;pointer-events:none;transition:all 500ms ease}paper-shadow[focus] div#actions paper-icon-button::shadow .button-overlay{background-color:rgba(255,255,255,.6)}</style><paper-shadow z="1" animated id="toolbar" focus?="{{focus}}" layout vertical center start-justified tabindex="-1"><div id="actions" layout vertical center start-justified></div></paper-shadow></template><script>!function(){"use strict";Polymer({publish:{focus:!1,tooltip:"Toolbar",icon:"settings",position:"left"},created:function(){this.timing=new Tundra.Classes.AsyncHelper("webrocket-toolbar",this)},ready:function(){$(this).mouseenter(this.enableFocus.bind(this)),$(this).mouseleave(this.disableFocusDelay.bind(this)).mousemove(this.stopDisableDelay.bind(this)).on("touchmove",this.stopDisableDelay.bind(this))},clear:function(){$(this.$.toolbar).find("core-tooltip").each(function(){"toggleToolbar"!==$(this).attr("id")&&$(this).remove()}),this.disableFocus()},toggleFocused:function(){this.setFocus(!this.focus)},enableFocus:function(){this.setFocus(!0)},disableFocus:function(){this.setFocus(!1)},disableFocusDelay:function(){this.focus&&(this.stopDisableDelay(),this.areContextMenusOpen()||this.timing.async("focus.delay",this.disableFocus,500))},stopDisableDelay:function(){this.focus&&this.timing.cancel("focus.delay")},setFocus:function(t){this.timing.cancel("focus.delay"),this.focus!==t&&(this.focus=t)},focusChanged:function(){this.$.toolbar.setZ(this.focus?2:1)},createTooltip:function(t){var i=document.createElement("core-tooltip");return i.tabIndex="-1",i.setAttribute("center",""),i.setAttribute("large",""),i.setAttribute("noarrow",""),i.setAttribute("label",t||""),"left"===this.position?i.setAttribute("position","right"):i.setAttribute("position","left"),i.classList.add("fancy"),i},replaceIcon:function(t){Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-disconnect.png")?(t.icon="remove-circle-outline",t.style.color="rgb(161, 47, 47)"):Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-expand.png")?t.icon="aspect-ratio":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-console.png")?t.icon="subject":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos1/24/209.png")?t.icon="av:videocam":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos1/32/97.png")?t.icon="maps:pin-drop":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos3/32/44.png")&&(t.icon="assignment-ind"),""===t.icon&&""!==t.iconUrl&&(t.src=t.iconUrl)},areContextMenusOpen:function(){var t=!1;return $(this.$.toolbar).find("paper-dropdown").each(function(){t||(t=this.opened)}),t},onActionClicked:function(t,i,e){if(this.action.contextMenu&&"paper-dropdown"===this.action.contextMenu.localName){if(void 0===this.action.menuHooked&&(this.action.contextMenu.addEventListener("core-overlay-open",function(t){var i=$(this.action).parent().get(0);i&&(i.disabled=t.detail,t.detail||this.that.disableFocusDelay())}.bind({that:this.that,action:this.action})),this.action.menuHooked=!0),!this.action.contextMenu.opened){var n=150,o=$(this.action.contextMenu).find("paper-item").length,s=$(this.action).parent().get(0),a={bottom:20,right:$(this.that.$.toolbar).outerWidth()/2,height:45,width:n};o>0&&s&&(a.bottom=$(this.that.$.toolbar).outerHeight()/2,a.right=$(this.that.$.toolbar).outerWidth()-($(s).outerWidth()/2+s.offsetLeft),a.height=45*(o>4?4:o)),$(this.action.contextMenu).css(a)}this.action.contextMenu.toggle()}},addAction:function(t){Array.isArray(t)||(t=[t]);for(var i=t.length-1;i>=0;i--){var e=t[i];this.replaceIcon(e),e.addEventListener("click",this.onActionClicked.bind({that:this,action:e}),!1);var n=this.createTooltip(e.tip);$(n).append(e),e.position!==Tundra.ui.$class.Position.Start&&e.position!==Tundra.ui.$class.Position.Top?$(this.$.actions).append(n):$(this.$.actions).prepend(n)}},add:function(t,i,e,n){var o=document.createElement("paper-icon-button");o.tabIndex="-1",o.iconUrl="string"!=typeof i||0!==i.toLowerCase().indexOf("http")&&0!==i.toLowerCase().indexOf("..")&&-1===i.indexOf("/")?"":i,o.icon=""===o.iconUrl&&"string"==typeof i?i:"",o.tip=t,o.widget=n?$(n):void 0,o.position=e;var s=$("<div/>").addClass("button-overlay");return o.overlay=s,o.shadowRoot&&$(o.shadowRoot).append(s),o.widget&&o.widget.is(":visible")&&s.hide(),o.hide=function(){return this.setWidgetVisibility(this.widget,!1)}.bind(o),o.show=function(){return this.setWidgetVisibility(this.widget,!0)}.bind(o),o.setWidgetVisibility=function(t,i){return i?(t&&$(t).show(),this.overlay.hide()):(t&&$(t).hide(),this.overlay.show()),Tundra.ui._updateLayouts(),this}.bind(o),o.toggleWidget=function(t){return $(t).toggle(),$(t).is(":visible")?this.overlay.hide():this.overlay.show(),Tundra.ui._updateLayouts(),this}.bind(o),o.on=function(t,i){"click"===t&&this.click(i)}.bind(o),o.click=function(t){this.addEventListener("click",function(){t(),Tundra.ui._updateLayouts()}.bind(this),!1)}.bind(o),o.tooltip=function(t){var i=$(this).parent().get(0);if(i&&"core-tooltip"===i.localName)return void 0===t?i.label:void("string"==typeof t&&(i.label=t))}.bind(o),o.widget&&o.click(function(){this.toggleWidget(this.widget)}.bind(o)),this.addAction(o),o},addContextMenu:function(t){t.transition="core-transition-fade",$(t).append("<div relative id='inner'/>"),this.$.toolbar.appendChild(t)},addContextMenuItem:function(t,i){$(t).find("#inner").append(i)},setHeight:function(t){"number"==typeof t&&(t=Math.max(t,$(this.$.actions).outerHeight(!0)),t=Math.max(t,42*$(this.$.actions).children().length+10),$(this.$.toolbar).css("height",t))}})}();</script></polymer-element>