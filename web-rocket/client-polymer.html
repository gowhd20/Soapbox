<!doctype html>
<html>
<head>
    <title>Meshmoon Rocket</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- CSS -->
    <style type="text/css">
    html, body {
        overflow: hidden;
        margin: 0px;
        padding: 0px;
    }
    body {
        position: absolute;
        width: 100%;
        height: 100%;

        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        font-weight: 400;
        color: #444;
    }
    #webrocket-container {
        overflow: hidden;
        position: absolute;
        width: 100%;
        height: 100%;

        background-color: black;
    }
    </style>

    <!-- @todo Remove the jquery CSS dependency -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">

    <!-- Fonts https://www.google.com/fonts#UsePlace:use/Collection:Lato:300,400,700,400italic|Source+Code+Pro:300,400,700|Roboto:100,300,400,500,700,400italic|Open+Sans:300,400,600 -->
    <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic|Source+Code+Pro:300,400,700|Roboto:100,300,400,500,700,400italic|Open+Sans:300,400,600' rel='stylesheet' type='text/css'>

    <!-- Polyfill for non WebComponent compliant browsers -->
    <script src="lib/webcomponents.min.js"></script>

    <!-- Web Components -->
    <link rel="import" href="elements/webrocket-elements-polymer.html">
    <link rel="import" href="elements/webrocket-elements.html">

    <!-- Meshmoon Web Rocket -->
    <script src="lib/meshmoon-webrocket-deps.js"></script>
    <script src="meshmoon-webrocket.js"></script>
	<script src="middleware/sockjs.js"></script>
	<script src="middleware/stomp.js"></script>        
	<script src="middleware/adapter.js"></script>
	<script src="middleware/middleware_api_v2.js"></script>
	<script src="threePhysics/physi.js"></script>
	
</head>
<body>

<div id="webrocket-container"></div>

<script>
var startWebRocket = function() {
    new TundraClient({
        Tundra : {
            polymer   : (typeof Polymer === "function"),
            deprecatedWarnings : true
        },
        TundraClient : {
            renderer  : ThreeJsRenderer,
            container : "#webrocket-container",
            loglevel  : "debug",
            applications : {
                "Freecamera" : "meshmoon-applications://meshmoon/freecamera/freecamera.webrocketjs"
            }
        },
        AssetAPI : {
            storages : {
                "meshmoon-applications://" : "http://meshmoon.s3.amazonaws.com/releases/meshmoon-applications/stable"
            }
        },
        plugins : {
            LoginScreenPlugin : {
                loginControlsEnabled : true,
                loadingScreenEnabled : true,
                headerText     : "Meshmoon Rocket",
                headerLinkUrl  : "http://meshmoon.com",
                connectingText : "Loading 3D Space"
            }
        }
    });
    EC_Script.registerNativeScriptReplacement({
        "avatar-manager" : "meshmoon-applications://meshmoon/avatar/avatar-manager.webrocketjs",
        "user-presence"  : "meshmoon-applications://meshmoon/user-presence/user-presence.webrocketjs",
        "communication"  : "meshmoon-applications://meshmoon/comms/communication.webrocketjs",
        "rts-camera"     : "meshmoon-applications://meshmoon/rts-camera/rts-camera.webrocketjs",
        "rss-reader"     : "meshmoon-applications://meshmoon/rss-feed-reader/rss-feed-reader.webrocketjs"
    });
};
if (typeof Polymer === "function" && typeof Polymer.whenReady === "function")
    Polymer.whenReady(startWebRocket);
else
    window.addEventListener("polymer-ready", startWebRocket)
</script>

</body>
</html>