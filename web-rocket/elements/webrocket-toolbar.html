<polymer-element name="webrocket-toolbar"><template><style type="text/css">paper-shadow#toolbar{pointer-events:auto;background-color:#FAFAFA;width:100%;height:52px;margin:0;padding:0;transition:transform 500ms ease;-webkit-transform:translate(calc(100% - 30px),0);transform:translate(calc(100% - 30px),0)}paper-shadow#toolbar[focus]{-webkit-transform:translate(0,0);transform:translate(0,0)}paper-shadow>core-tooltip{height:40px}#actions>core-tooltip>paper-icon-button,paper-shadow>core-tooltip>paper-icon-button{padding:8px}#actions>core-tooltip>paper-icon-button[colored],paper-shadow>core-tooltip>paper-icon-button[colored]{color:#4682b4}#actions>core-tooltip>paper-icon-button[colored]::shadow #ripple,paper-shadow>core-tooltip>paper-icon-button[colored]::shadow #ripple{color:#444}#actions>core-tooltip>paper-icon-button::shadow #ripple,paper-shadow>core-tooltip>paper-icon-button::shadow #ripple{color:#4682b4}#actions>core-tooltip>paper-icon-button::shadow #icon,paper-shadow>core-tooltip>paper-icon-button::shadow #icon{height:24px;width:24px}#actions>core-tooltip>paper-icon-button::shadow #icon>div,paper-shadow>core-tooltip>paper-icon-button::shadow #icon>div{background-repeat:no-repeat}core-tooltip[large] /deep/ .core-tooltip{font-size:15px;padding:12px;right:0;margin-right:5px;margin-bottom:12px}core-tooltip.fancy::shadow .core-tooltip{opacity:0!important;-webkit-transition:all 300ms ease 0ms;transition:all 300ms ease 0ms;-webkit-transform:translate3d(0,10px,0);transform:translate3d(0,10px,0)}core-tooltip.fancy:focus::shadow .core-tooltip,core-tooltip.fancy:hover::shadow .core-tooltip{opacity:1!important;-webkit-transition-delay:0ms;transition-delay:0ms;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}core-tooltip.fancy:focus{visibility:hidden!important}paper-shadow>paper-dropdown>div>paper-item::shadow div.button-content:hover{background-color:#ebebeb;color:#000}paper-shadow>paper-dropdown>div>paper-item::shadow div.button-content{padding:.8em 1em}paper-icon-button#buttonToggle{-webkit-transition:all 400ms ease;transition:all 499ms ease}paper-icon-button#buttonToggle[expanded]{background-color:rgba(70,130,180,.75)}paper-icon-button#buttonToggle[colored][expanded]{color:#fff}</style><paper-shadow z="1" animated id="toolbar" focus?="{{focus}}" layout horizontal center start-justified tabindex="-1"><core-tooltip large id="toggleToolbar" label="{{ !focus ? tooltip : 'Hide ' + tooltip }}" position="top left" noarrow class="fancy" center tabindex="-1"><paper-icon-button id="buttonToggle" icon="{{ !focus ? icon : 'chevron-right' }}" colored?="{{focus}}" on-click="{{toggleFocused}}" expanded?="{{focus}}" tabindex="-1"></paper-icon-button></core-tooltip><div id="actions" layout horizontal center start-justified></div></paper-shadow></template><script>!function(){"use strict";Polymer({publish:{focus:!1,tooltip:"Toolbar",icon:"apps"},created:function(){this.timing=new Tundra.Classes.AsyncHelper("webrocket-toolbar",this)},ready:function(){$(this).mouseleave(this.disableFocusDelay.bind(this)).mousemove(this.stopDisableDelay.bind(this)).on("touchmove",this.stopDisableDelay.bind(this))},clear:function(){$(this.$.toolbar).find("core-tooltip").each(function(){"toggleToolbar"!==$(this).attr("id")&&$(this).remove()}),this.disableFocus()},toggleFocused:function(){this.setFocus(!this.focus)},enableFocus:function(){this.setFocus(!0)},disableFocus:function(){this.setFocus(!1)},disableFocusDelay:function(){this.focus&&(this.stopDisableDelay(),this.areContextMenusOpen()||this.timing.async("focus.delay",this.disableFocus,5e3))},stopDisableDelay:function(){this.focus&&this.timing.cancel("focus.delay")},setFocus:function(t){this.timing.cancel("focus.delay"),this.focus!==t&&(this.focus=t)},focusChanged:function(){this.$.toolbar.setZ(this.focus?2:1)},createTooltip:function(t){var i=document.createElement("core-tooltip");return i.tabIndex="-1",i.setAttribute("center",""),i.setAttribute("large",""),i.setAttribute("noarrow",""),i.setAttribute("label",t||""),i.setAttribute("position","top left"),i.classList.add("fancy"),i},replaceIcon:function(t){Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-disconnect.png")?(t.icon="remove-circle-outline",t.style.color="rgb(161, 47, 47)"):Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-expand.png")?t.icon="aspect-ratio":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"img/icon-console.png")?t.icon="subject":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos1/24/209.png")?t.icon="av:videocam":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos1/32/97.png")?t.icon="maps:pin-drop":Tundra.Classes.CoreStringUtils.endsWith(t.iconUrl,"pictos3/32/44.png")&&(t.icon="assignment-ind"),""===t.icon&&""!==t.iconUrl&&(t.src=t.iconUrl)},areContextMenusOpen:function(){var t=!1;return $(this.$.toolbar).find("paper-dropdown").each(function(){t||(t=this.opened)}),t},onActionClicked:function(t,i,n){if(this.action.contextMenu&&"paper-dropdown"===this.action.contextMenu.localName){if(void 0===this.action.menuHooked&&(this.action.contextMenu.addEventListener("core-overlay-open",function(t){var i=$(this.action).parent().get(0);i&&(i.disabled=t.detail,t.detail||this.that.disableFocusDelay())}.bind({that:this.that,action:this.action})),this.action.menuHooked=!0),!this.action.contextMenu.opened){var e=150,o=$(this.action.contextMenu).find("paper-item").length,s=$(this.action).parent().get(0),c={bottom:20,right:$(this.that.$.toolbar).outerWidth()/2,height:45,width:e};o>0&&s&&(c.bottom=$(this.that.$.toolbar).outerHeight()/2,c.right=$(this.that.$.toolbar).outerWidth()-($(s).outerWidth()/2+s.offsetLeft),c.height=45*(o>4?4:o)),$(this.action.contextMenu).css(c)}this.action.contextMenu.toggle()}},addAction:function(t){Array.isArray(t)||(t=[t]);for(var i=t.length-1;i>=0;i--){var n=t[i];this.replaceIcon(n),n.addEventListener("click",this.onActionClicked.bind({that:this,action:n}),!1);var e=this.createTooltip(n.tip);$(e).append(n),$(this.$.actions).prepend(e)}},add:function(t,i){var n=document.createElement("paper-icon-button");return n.tabIndex="-1",n.iconUrl="string"!=typeof i||0!==i.toLowerCase().indexOf("http")&&0!==i.toLowerCase().indexOf("..")?"":i,n.icon=""===n.iconUrl&&"string"==typeof i?i:"",n.tip=t,n.hide=function(){this.hidden=!0}.bind(n),n.show=function(){this.hidden=!1}.bind(n),n.toggleWidget=function(t){$(t).toggle(),Tundra.ui._updateLayouts()}.bind(this),n.on=function(t,i){"click"===t&&this.click(i)}.bind(this),n.click=function(t){this.addEventListener("click",function(){t(),Tundra.ui._updateLayouts()}.bind(this),!1)}.bind(n),n.tooltip=function(t){var i=$(this).parent().get(0);if(i&&"core-tooltip"===i.localName)return void 0===t?i.label:void("string"==typeof t&&(i.label=t))}.bind(n),this.addAction(n),n},addContextMenu:function(t){t.transition="core-transition-fade",$(t).append("<div relative id='inner'/>"),this.$.toolbar.appendChild(t)},addContextMenuItem:function(t,i){$(t).find("#inner").append(i)}})}();</script></polymer-element>